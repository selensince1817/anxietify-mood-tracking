{% extends "base.html" %}

{% block title %}Anxietify | Mood Timeline{% endblock %}

{% block extra_head %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
{% endblock %}

{% block body %}
<div class="has-text-centered">
  <div class="title is-3 has-text-white">Mood Time Series</div>
  <div class="subtitle">
    The graph shows the "happiness" (valence) of tracks you've saved over time.
  </div>
</div>

<div class="container pt-6">
  <canvas id="lineChart" width="700" height="500"></canvas>
</div>

<div class="container has-text-left pt-3">
  <div class="content is-small has-text-white">
    <h2 class="has-text-white">A little clarification</h2>
    <p>Each track in Spotify has various parameters determined by algorithmic analysis.</p>
    <p>
      When an artist uploads a track, Spotify's ML stack quantifies attributes to power the recommendation
      system and features like Spotify Wrapped.
    </p>
    <p>These parameters can include:</p>
    <ul>
      <li>Danceability</li>
      <li>Melodic structure</li>
      <li>Happiness level (valence)</li>
      <li>And more...</li>
    </ul>
    <p>
      Check out
      <a href="https://www.music-tomorrow.com/blog/how-spotify-recommendation-system-works-a-complete-guide-2022">this article</a>
      if you're curious about the full pipeline.
    </p>
    <p>The next page shows the cycles (periods) detected in your saved tracks.</p>
  </div>
</div>

<div class="container pt-4 is-flex is-justify-content-end">
  <nav class="pagination is-rounded" role="navigation" aria-label="pagination">
    <a href="/display_periods" class="pagination-next has-text-white">Next page</a>
  </nav>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/mood-charts.js') }}"></script>
<script>
  window.renderMoodChart({
    canvasId: "lineChart",
    labels: {{ labels | tojson }},
    values: {{ values | tojson }}
  });
</script>
{% endblock %}
